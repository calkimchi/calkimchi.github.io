<!-- 

Important:
Question: Are we able to swipe down the article on mobile?
Question: will we accidentally click to next article?
Can we save state of 

Nice to haves:
Swiping left/right to next article
Lazy loading for articles so you don't load all at once - important for scale


 -->


<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link rel="icon" href="img/fav-icon.png" type="image/x-icon" />
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>Calvin Kim</title>

        <!-- Icon css link -->
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <!-- Bootstrap -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        
        <!-- Rev slider css -->
        <link href="vendors/revolution/css/settings.css" rel="stylesheet">
        <link href="vendors/revolution/css/layers.css" rel="stylesheet">
        <link href="vendors/revolution/css/navigation.css" rel="stylesheet">
        
        <!-- Extra plugin css -->
        <link href="vendors/owl-carousel/owl.carousel.min.css" rel="stylesheet">
        <link href="vendors/magnify-popup/magnific-popup.css" rel="stylesheet">
        
        
        <link href="css/style.css" rel="stylesheet">
        <link href="css/responsive.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        
        <!--================Header Menu Area =================-->
        <header class="main_menu_area">
            <nav class="navbar navbar-expand-lg navbar-light bg-light" style="height: 10vh;">
                <a class="navbar-brand" href="#" ><img src="img/logo.png" alt="" style="max-width: 70vw  ;visibility: hidden;"></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav">
                        <li class="nav-item active"><a class="nav-link" href="index.html#index">Home</a></li>
                        <li class="nav-item dropdown submenu">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Blogs</a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li class="nav-item"><a class="nav-link" href="blog.html">Technology</a></li>
                                
                            </ul>
                        </li>
                        <li class="nav-item dropdown submenu">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Portfolio (in construction)</a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li class="nav-item"><a class="nav-link" >Webdev</a></li>
                                <li class="nav-item"><a class="nav-link" >Data</a></li>
                                <li class="nav-item"><a class="nav-link" >Video</a></li>
                                <li class="nav-item"><a class="nav-link" >Photo</a></li>
                                <li class="nav-item"><a class="nav-link" >Music</a></li>
                            </ul>
                        </li>
                        <li class="nav-item"><a class="nav-link" href="index.html#testimonials">About Me</a></li>
                        <li class="nav-item"><a class="nav-link" href="index.html#contact">Contact</a></li>
                    </ul>
                </div>
            </nav>
        </header>
        <!--================End Header Menu Area =================-->
        
        

        <!--================Banner Area =================-->
        
        <section class="banner_area" style="height:10vh;">  
        <div class="grey-overlay"></div>  
            <div class="container" style="height:10vh;">
                <div class="banner_inner_text" style="padding-top: 18px; padding-right: 0px; padding-bottom: 0px; max-width: 70vw; margin-right: 0px;">
                    <h2 style="font-size:5vh">Technology Blog</h2>
                </div>
            </div>
        </section>
        <!--================End Banner Area =================-->
        
        

        <!--================Blog Main Area =================-->
        <section style="height: 80vh;">
            <div class="background_area"></div>
            <div id="article" class="carousel slide" data-ride="carousel" data-interval="false" >
                <!-- Data-interval: true means it auto transitions between images -->
      <!-- Indicators -->
              <ol class="carousel-indicators" disabled="true">
                <li data-target="#article-1" class="active" style="color:black">0</li>
                <li data-target="#article-2" style="color:black"></li>
                <li data-target="#article-3" style="color:black"></li>
                <li data-target="#article-4" style="color:black"></li>
                <li data-target="#article-5" style="color:black"></li>

              </ol>

              <!-- Wrapper for slides -->
              <div class="carousel-inner" >
              <div class="box-shadow-inset-overlay" ></div>  
                <div class="carousel-item active" > <!-- article 1 -->
                  <iframe src="https://docs.google.com/document/d/e/2PACX-1vRSyc6Im26vr6H35b8C61K4W4qCxtMDZej90jXh2AuC9tO6zgMizXU-oBw1Iut-lAPDcbZDRs9WiAh3/pub?embedded=true" style="width:100%; height:80vh; position: relative;"></iframe>
                  
                </div>

                <div class="carousel-item" > <!-- Amazon go -->
                  <iframe src="https://docs.google.com/document/d/e/2PACX-1vQJRwZRsescsY6N1X5947zCOrj55r78cVxPWEhrXLTkrPSWmnI2fcTR-tsN3X9HvnrrMNESbdBo6f9A/pub?embedded=true" style="width:100%; height:80vh; position: relative;"></iframe>
                  
                </div>

                <div class="carousel-item" > <!-- Article 3 -->
                  <iframe src="https://docs.google.com/document/d/e/2PACX-1vQfE1F0RUjFM1vuNuRGpZ-PBKTAZ_PBSxeSSrFRKo_SwkgWk5EtbwkbmkCMc_zzUQgfOUyTKwv9X6mK/pub?embedded=true" style="width:100%; height:80vh; position: relative;"></iframe>
                  
                </div>

                <div class="carousel-item" > <!-- article 4 -->
                  <iframe src="https://docs.google.com/document/d/e/2PACX-1vRqmIZcxnA3IgKAXW54cb0foq1YeE5CxsKQMlSmx6drz7sXj34keKhKCKX-XUh1iVcKkLFPCmsi7LbT/pub?embedded=true" style="width:100%; height:80vh; position: relative;"></iframe>
                  
                </div>

                <div class="carousel-item" >
                  <iframe src="https://docs.google.com/document/d/e/2PACX-1vSWbUcDyYZtFqcsT5LG_rdwGE2LJb9KJpSCYet97APZfqCfGNOw9fYk0qMvGzblA3S21duUAXFqGKmh/pub?embedded=true" style="width:100%; height:80vh; position: relative;"></iframe>
                  
                </div>

                <div class="carousel-item">
                  <img src="img/home-slider/slider-bg-3.jpg" alt="New York" style="width:100%; height:80vh">
                  <div class="carousel-caption">
                    <h3>Final slide</h3>
                    <p>Thanks for reading! Hope to get you more content soon.</p>
                  </div>
                </div>
              </div>

             
          </div>
        </section>
        <!--================End Footer Area =================-->
        <div class="currentButton">
            <p class="currentArticleLabel" id="current" style="font-size: 2vh;">Current:</p> 
            <p class="currentArticle" id="current">0</p> 
         </div>

          <!-- Left and right controls -->
          <a class="carousel-control-prev" id="prev" role="button" href="#article" data-slide="prev"  >
            <div class="previousButton" style="color:black">0</div><!-- Just the text value -->
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true" style="color:black"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" id="next" role="button" href="#article" data-slide="next"  >
            <div class="nextButton" style="color:black">0</div>
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true" style="color:black"></span>
            <span class="sr-only">Next</span>
          </a>
        
        
        
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="js/jquery-3.2.1.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="js/popper.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <!-- Rev slider js -->
        <script src="vendors/revolution/js/jquery.themepunch.tools.min.js"></script>
        <script src="vendors/revolution/js/jquery.themepunch.revolution.min.js"></script>
        <script src="vendors/revolution/js/extensions/revolution.extension.actions.min.js"></script>
        <script src="vendors/revolution/js/extensions/revolution.extension.video.min.js"></script>
        <script src="vendors/revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
        <script src="vendors/revolution/js/extensions/revolution.extension.layeranimation.min.js"></script>
        <script src="vendors/revolution/js/extensions/revolution.extension.navigation.min.js"></script>
        <script src="vendors/revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
        <!-- Extra plugin css -->
        <script src="vendors/counterup/jquery.waypoints.min.js"></script>
        <script src="vendors/counterup/jquery.counterup.min.js"></script> 
        <script src="vendors/counterup/apear.js"></script>
        <script src="vendors/counterup/countto.js"></script>
        <script src="vendors/owl-carousel/owl.carousel.min.js"></script>
        <script src="vendors/magnify-popup/jquery.magnific-popup.min.js"></script>
        <script src="js/smoothscroll.js"></script>
        <script src="vendors/circle-bar/circle-progress.min.js"></script>
        <script src="vendors/circle-bar/plugins.js"></script>
        <script src="vendors/isotope/imagesloaded.pkgd.min.js"></script>
        <script src="vendors/isotope/isotope.pkgd.min.js"></script>
        
        <script src="js/circle-active.js"></script>
        <script src="js/theme.js"></script>

        <!-- Lazy Loading for carousel not working -->
        <script>
        /*  document.addEventListener("DOMContentLoaded", function() {
      var lazyImages = [].slice.call(document.querySelectorAll("img.lazy"));

      if ("IntersectionObserver" in window) {
        let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
          entries.forEach(function(entry) {
            if (entry.isIntersecting) {
              let lazyImage = entry.target;
              lazyImage.src = lazyImage.dataset.src;
              lazyImage.srcset = lazyImage.dataset.srcset;
              lazyImage.classList.remove("lazy");
              lazyImageObserver.unobserve(lazyImage);
            }
          });
        });

        lazyImages.forEach(function(lazyImage) {
          lazyImageObserver.observe(lazyImage);
        });
      } else {
        // Possibly fall back to a more compatible method here
      }
    });*/
        </script>

        <!-- Counter for blog pages -->
        <script>
        /*Count articles to get number of max articles */
        var maxNumberOfArticles = $(".carousel-item").length;
        
        var currentArticle = 1;
        var nextArticle = 2; /*currentArticle + 1;*/ /*If current is maxnumber, then nextarticle = 1*/
        var previousArticle = maxNumberOfArticles; /*currentArticle - 1;*/ /*If current is 1, then previous article = maxnumber*/



        /*Set button disabled attributes to false*/
        document.getElementById('next').setAttribute('disabled', false);
        document.getElementById('prev').setAttribute('disabled', false);

        /*initialization of counter values*/   
        counterVisualUpdate()

            function counterVisualUpdate(){/*Update the values in the html*/
                document.querySelector('.previousButton').innerHTML = previousArticle;
                document.querySelector('.nextButton').innerHTML = nextArticle;
                document.querySelector('.currentArticle').innerHTML = currentArticle;
            }

            function checkAndUpdate(input){

                if(input > maxNumberOfArticles){
                    return 1;
                } 
                if(input <= 0){
                    return maxNumberOfArticles;  
                } 
                return input;
            }

            function lockoutSubmit(button) {
                /*var oldValue = button.value;*/

                console.log(button);
                document.getElementById('next').setAttribute('disabled', true);
                document.getElementById('prev').setAttribute('disabled', true);
                
                setTimeout(function(){
                    document.getElementById('next').setAttribute('disabled', false);
                    document.getElementById('prev').setAttribute('disabled', false);
                }, 600)

            }

            
            document.getElementById('next').onclick = function() { /*We need to increment current Number by 1 */
                if (document.getElementById('next').getAttribute('disabled') == 'false'){
                    currentArticle++; 
                    nextArticle++;
                    previousArticle++;
                    
                    currentArticle = checkAndUpdate(currentArticle);
                    nextArticle = checkAndUpdate(nextArticle);
                    previousArticle = checkAndUpdate(previousArticle);

                    counterVisualUpdate();
                    lockoutSubmit(this);
                }
            }

            document.getElementById('prev').onclick = function() {/* We need to decrement current number*/
            
                if (document.getElementById('prev').getAttribute('disabled') == 'false'){

                    currentArticle--; 
                    nextArticle--;
                    previousArticle--;
                    
                    currentArticle = checkAndUpdate(currentArticle);
                    nextArticle = checkAndUpdate(nextArticle);
                    previousArticle = checkAndUpdate(previousArticle);

                    counterVisualUpdate();
                    lockoutSubmit(this);
                }
            }

        </script> <!-- 20-30 min layout,  -->


        <script type="text/javascript">
            //Taken from https://stackoverflow.com/questions/48169773/anchor-link-jump-to-carousel-slide

            // Create a RegExp for matching expected hash values. 
            // This is used to ensure our sliding logic happens on only the relevant hash-changes
            // For this example, I have assumed the pattern to be article-<slide#> 
            // (Ex: article-1 goes to the first slide)
            var slideRegExp = /^#article-[0-9]+$/;

            // Get a reference to the nav items to update active status  - you may want to do this differently 
            // based on your usecase
            var $navItems = $('.nav-item');

            // Initialise the carousel and keep the reference (to avoid repeated jQuery lookups)
            var $c = $('#article').carousel({
              interval: false
            });

            var slide;

            // Listen for the hash change event on the window object
            /*$(window).on('hashchange', function(ev) {*/
              // Hash has changed
              //Get current has value
              var hash = window.location.hash;
/*

              // Ensure this is a hash for our slider
              if (slideRegExp.test(hash)) {
                // RegExp match failed, this is for something else, do nothing
                // and preserve default behaviour
                return true;
              }
*/

              // Exctract the slide value 
              slide = +hash.split('-')[1];
              // Adjust for zero index
              slide = !isNaN(slide) && slide > 0 ? slide - 1 : 0;

              // Transition to the computed slide
              console.log("transitioning to: " + slide)
              $c.carousel(slide);



            // Update Calvin's Counter updater

              currentArticle = slide+1;
              nextArticle = currentArticle+1;
              previousArticle = currentArticle-1;

                currentArticle = checkAndUpdate(currentArticle);
                nextArticle = checkAndUpdate(nextArticle);
                previousArticle = checkAndUpdate(previousArticle);

                counterVisualUpdate();
                lockoutSubmit(this);

              // Update hash to the hash-id of the carousel
              // You may want to do this using scrollTo or something similar if changing the hash is a problem
              window.location.hash = '#article';

              // Prevent the default browser action for this hash change
             /*
              ev.preventDefault();
*/
              

             /* return false;*/
          /*  });*/

            // Listen for the slide event and update the active status of navigation links
            // Not sure if this is necessary in your case considering your example uses a dropdown 
            /*
            $c.on('slide.bs.carousel', function(ev) {
              var slide = +ev.to;
              $navItems.filter('.active').removeClass('active');
              $navItems.filter("[data-slide='" + slide + "']").addClass('active');
            });  
*/

/*object.bootstrap.Carousel({
                pause: true,
                interval: false
                });

                console.log(bootstrap.Carousel.Default);*/

        </script>



    </body>
</html>